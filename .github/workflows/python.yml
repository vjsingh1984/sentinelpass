name: Python CI

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]
  paths:
    - '**.py'
    - '.github/workflows/python.yml'

jobs:
  # Python formatting check with black
  format:
    name: Check Python Formatting (black)
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      - name: Install black
        run: pip install black
      - name: Check formatting
        run: black --check --diff .

  # Python linting with ruff
  ruff:
    name: Ruff Lint
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      - name: Install ruff
        run: pip install ruff
      - name: Run ruff
        run: ruff check .

  # Type checking with mypy
  mypy:
    name: Type Check (mypy)
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      - name: Install mypy
        run: pip install mypy
      - name: Run mypy
        run: mypy . || true  # Don't fail if no Python files or type stubs yet
